"use strict";(globalThis.webpackChunkwuair_docs=globalThis.webpackChunkwuair_docs||[]).push([[2100],{4712(e,n,t){t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Control/notes","title":"gain scheduling","description":"syms matlab, linearization","source":"@site/docs/Control/notes.md","sourceDirName":"Control","slug":"/Control/notes","permalink":"/wuair_docs/docs/Control/notes","draft":false,"unlisted":false,"editUrl":"https://github.com/WU-AI-Racing/wuair_docs.git/docs/Control/notes.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"PID Control","permalink":"/wuair_docs/docs/Control/PID"}}');var a=t(4848),l=t(8453);const s={},o="gain scheduling",r={},d=[{value:"syms matlab, linearization",id:"syms-matlab-linearization",level:2},{value:"Video Lecture",id:"video-lecture",level:3},{value:"Definitions",id:"definitions",level:3},{value:"full state feedback",id:"full-state-feedback",level:2},{value:"Definitions",id:"definitions-1",level:3},{value:"Iterative Eigenvalue Manipulation",id:"iterative-eigenvalue-manipulation",level:2},{value:"MATLAB",id:"matlab",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"gain-scheduling",children:"gain scheduling"})}),"\n",(0,a.jsx)(n.h2,{id:"syms-matlab-linearization",children:"syms matlab, linearization"}),"\n",(0,a.jsx)(n.h3,{id:"video-lecture",children:"Video Lecture"}),"\n",(0,a.jsx)(n.p,{children:"I link below a short (and dense) example of the Linearization of a\nnonlinear set of dynamics using both MATLAB syms and a manual method:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.youtube.com/watch?v=UQpt7qJdd1I",children:"Linerization Example with syms in\nMATLAB"})}),"\n",(0,a.jsx)(n.h3,{id:"definitions",children:"Definitions"}),"\n",(0,a.jsxs)(n.p,{children:["We are some system described by the following equation, for state $",(0,a.jsx)(n.code,{children:"x"}),"$\nand input $",(0,a.jsx)(n.code,{children:"u"}),"$:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-math",children:"\\dot x = f(x,u)\n"})}),"\n",(0,a.jsxs)(n.p,{children:[", where our linearization is defined, about a linearization point\n$",(0,a.jsx)(n.code,{children:"(x_0,u_0)"}),"$:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-math",children:"\\dot x (x,u) \\approx f(x_0,u_0) + \\left \\frac{\\partial f}{\\partial x} \\right|_{x_0,u_0} (x-x_0)  + \\left \\frac{\\partial f}{\\partial u} \\right|_{x_0,u_0} (u-u_0)  \n"})}),"\n",(0,a.jsxs)(n.p,{children:["The jacobians are redefined to be $",(0,a.jsx)(n.code,{children:"A(x_0,u_0)"}),"$ and $",(0,a.jsx)(n.code,{children:"B(x_0,u_0)"}),"$ in\norder of appearance. We can then group terms and define\n$",(0,a.jsx)(n.code,{children:"(\\Delta x, \\Delta u) := (x-x_0, u-u_0)"}),"$, such that:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-math",children:" \\Delta \\dot x = A\\Delta x+B\\Delta u\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Note the linearity of the derivative, such that\n$",(0,a.jsx)(n.code,{children:"\\frac{d\\Delta x}{dt} = \\Delta \\frac{dx}{dt}"}),"$."]}),"\n",(0,a.jsx)(n.h2,{id:"full-state-feedback",children:"full state feedback"}),"\n",(0,a.jsx)(n.h3,{id:"definitions-1",children:"Definitions"}),"\n",(0,a.jsx)(n.p,{children:"I will assume you have seen or understand the prior definitions for the\nlinearization of our nonlinear dynamics. Given them, We define full\nstate feedback as such:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-math",children:"u = -K^Tx \\implies \\Delta x = (A - BK^T)\\Delta x\n"})}),"\n",(0,a.jsxs)(n.p,{children:["It should be noted $",(0,a.jsx)(n.code,{children:"u_0 = -K^Tx_0 \\implies \\Delta u = -K^T\\Delta x"}),"$"]}),"\n",(0,a.jsxs)(n.p,{children:["The matrix $",(0,a.jsx)(n.code,{children:"A-BK^T"}),"$'s eigenvalues decide directly the settling time\nand stability margins for our linear system. Because our system is\nheavily nonlinear and MIMO (Multiple Input, Multiple Output), we cannot\nsimply solve for the eigenvalues and remain computationally efficient.\nInstead, can use $",(0,a.jsx)(n.code,{children:"\\texttt{place()}"}),"$, in MATLAB or python control\npackages to automate these processes."]}),"\n",(0,a.jsx)(n.p,{children:"There are conditions to this process, one such one being the linear\nsystem be controllable, a key failure of gain scheduling."}),"\n",(0,a.jsx)(n.h2,{id:"iterative-eigenvalue-manipulation",children:"Iterative Eigenvalue Manipulation"}),"\n",(0,a.jsxs)(n.p,{children:["Now that we can know the form of the matrix to solve for and have a\nmethod to solve for the gain matrix $",(0,a.jsx)(n.code,{children:"K"}),"$, we must build our pipeline."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"function getNewControl(f,x)\n    Given dynamics f, current state x,\n    linearize f about x,\n    solve for desired eigenvalues,\n    return controller u=-K^Tx\n"})}),"\n",(0,a.jsx)(n.p,{children:"text"}),"\n",(0,a.jsx)(n.h1,{id:"general-tools",children:"General Tools"}),"\n",(0,a.jsx)(n.h2,{id:"matlab",children:"MATLAB"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://www.mathworks.com/help/symbolic/syms.html",children:"syms MATLAB help\npage"})," ",(0,a.jsx)(n.a,{href:"https://www.mathworks.com/help/matlab/ref/ode45.html",children:"ode45 MATLAB\nhelp page"})," ",(0,a.jsx)(n.a,{href:"https://www.youtube.com/watch?v=FXSpHy8LvmY",children:"Pole\nPlacement MATLAB Tutorial (Eigenvalue\nManipulation)"})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>s,x:()=>o});var i=t(6540);const a={},l=i.createContext(a);function s(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);