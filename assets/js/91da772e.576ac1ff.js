"use strict";(globalThis.webpackChunkwuair_docs=globalThis.webpackChunkwuair_docs||[]).push([[537],{3764:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"ros-guides/creating-workspace","title":"Creating a New ROS2 Node","description":"This guide walks you through creating a new ROS 2 package, adding a simple publisher node, and configuring the build files.","source":"@site/docs/ros-guides/creating-workspace.md","sourceDirName":"ros-guides","slug":"/ros-guides/creating-workspace","permalink":"/wuair_docs/docs/ros-guides/creating-workspace","draft":false,"unlisted":false,"editUrl":"https://github.com/WU-AI-Racing/wuair_docs.git/docs/ros-guides/creating-workspace.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"ROS guides","permalink":"/wuair_docs/docs/category/ros-guides"}}');var d=o(4848),s=o(8453);const i={sidebar_position:1},c="Creating a New ROS2 Node",t={},a=[{value:"Step 1: Create Your New Package",id:"step-1-create-your-new-package",level:2},{value:"Step 2: Add Your Node&#39;s Code",id:"step-2-add-your-nodes-code",level:2},{value:"Step 3: Update Your Build &amp; Package Files",id:"step-3-update-your-build--package-files",level:2},{value:"Step 4: Build and Run Your New Node",id:"step-4-build-and-run-your-new-node",level:2},{value:"Build just your new C++ package",id:"build-just-your-new-c-package",level:4},{value:"Or build just your new Python package",id:"or-build-just-your-new-python-package",level:4},{value:"Run the C++ node",id:"run-the-c-node",level:4},{value:"Run the Python node",id:"run-the-python-node",level:4}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"creating-a-new-ros2-node",children:"Creating a New ROS2 Node"})}),"\n",(0,d.jsx)(n.p,{children:"This guide walks you through creating a new ROS 2 package, adding a simple publisher node, and configuring the build files."}),"\n",(0,d.jsx)(n.h2,{id:"step-1-create-your-new-package",children:"Step 1: Create Your New Package"}),"\n",(0,d.jsx)(n.p,{children:"First, navigate to the src directory of your ROS 2 workspace (the one you set up in ros_repo_setup_guide.md)."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"cd src\n"})}),"\n",(0,d.jsx)(n.p,{children:"Now, use the ros2 pkg create command. This will generate a complete package directory for you. You need to choose between C++ and Python."}),"\n",(0,d.jsx)(n.p,{children:"For a C++ Package (Recommended):\nThe --node-name option will automatically create a simple main.cpp file."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"ros2 pkg create --build-type ament_cmake --node-name my_cpp_node my_cpp_pkg\n"})}),"\n",(0,d.jsx)(n.p,{children:"For a Python Package:\nThe --node-name option will automatically create a simple .py file."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"ros2 pkg create --build-type ament_python --node-name my_py_node my_py_pkg\n"})}),"\n",(0,d.jsxs)(n.p,{children:["This will create a new directory (e.g., ",(0,d.jsx)(n.code,{children:"my_cpp_pkg/"})," or",(0,d.jsx)(n.code,{children:" my_py_pkg/"}),") inside src/ with all the necessary files."]}),"\n",(0,d.jsx)(n.h2,{id:"step-2-add-your-nodes-code",children:"Step 2: Add Your Node's Code"}),"\n",(0,d.jsx)(n.p,{children:'The command in Step 1 creates a basic "Hello World" node. Let\'s replace it with a more useful "Publisher" node.'}),"\n",(0,d.jsx)(n.p,{children:"I've provided two example files:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"my_publisher_node.cpp (for C++)"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"my_publisher_node.py (for Python)"}),"\nFor C++:\nCopy the code from my_publisher_node.cpp and use it to replace the contents of src/my_cpp_pkg/src/my_cpp_node.cpp."]}),"\n",(0,d.jsx)(n.p,{children:"For Python:\nCopy the code from my_publisher_node.py and use it to replace the contents of src/my_py_pkg/my_py_pkg/my_py_node.py."}),"\n",(0,d.jsx)(n.h2,{id:"step-3-update-your-build--package-files",children:"Step 3: Update Your Build & Package Files"}),"\n",(0,d.jsx)(n.p,{children:"Because our new node publishes a std_msgs/String, it has new dependencies. You must tell the build system about them."}),"\n",(0,d.jsx)(n.p,{children:"For C++ (my_cpp_pkg):\nYou need to edit two files:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"package.xml"}),": Add dependencies for rclcpp (ROS Client Library for C++) and std_msgs."]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.code,{children:"package.xml.example"})," for what this looks like."]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"CMakeLists.txt"}),": Tell CMake to find the std_msgs package and link it to your node."]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.code,{children:"CMakeLists.txt"}),".example for the required changes."]}),"\n",(0,d.jsx)(n.p,{children:"For Python (my_py_pkg):\nYou only need to edit one file:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"package.xml"}),": Add dependencies for rclpy (ROS Client Library for Python) and std_msgs."]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.code,{children:"package.xml"}),".example for what this looks like."]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"setup.py"}),": This file defines your package's metadata. You need to make sure the entry_points section is correct."]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.code,{children:"setup.py.example"})," for a complete file."]}),"\n",(0,d.jsx)(n.h2,{id:"step-4-build-and-run-your-new-node",children:"Step 4: Build and Run Your New Node"}),"\n",(0,d.jsx)(n.p,{children:"Navigate to your workspace root (e.g., /ros2_ws)."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"cd ..\n"})}),"\n",(0,d.jsx)(n.p,{children:"Build your new package:"}),"\n",(0,d.jsx)(n.h4,{id:"build-just-your-new-c-package",children:"Build just your new C++ package"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"colcon build --packages-select my_cpp_pkg\n"})}),"\n",(0,d.jsx)(n.h4,{id:"or-build-just-your-new-python-package",children:"Or build just your new Python package"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"colcon build --packages-select my_py_pkg\n"})}),"\n",(0,d.jsx)(n.p,{children:"Source your workspace:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"source install/setup.bash\n"})}),"\n",(0,d.jsx)(n.p,{children:"Run your node!"}),"\n",(0,d.jsx)(n.h4,{id:"run-the-c-node",children:"Run the C++ node"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"ros2 run my_cpp_pkg my_cpp_node\n"})}),"\n",(0,d.jsx)(n.h4,{id:"run-the-python-node",children:"Run the Python node"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"ros2 run my_py_pkg my_py_node\n"})}),"\n",(0,d.jsx)(n.p,{children:'Check the output: In another terminal (after sourcing), you can "listen" to the topic your node is publishing:'}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"ros2 topic echo /topic\n"})}),"\n",(0,d.jsxs)(n.p,{children:["You should see ",(0,d.jsx)(n.code,{children:'"Hello, world! 1"'}),", ",(0,d.jsx)(n.code,{children:'"Hello, world! 2"'}),", etc."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>c});var r=o(6540);const d={},s=r.createContext(d);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);