"use strict";(globalThis.webpackChunkwuair_docs=globalThis.webpackChunkwuair_docs||[]).push([[2909],{5364(e,t,i){i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"Control/Gain_Schedule","title":"Gain scheduling","description":"If math images are not rendering, a pre-compiled PDF version of this page is available here.","source":"@site/docs/Control/Gain_Schedule.mdx","sourceDirName":"Control","slug":"/Control/Gain_Schedule","permalink":"/wuair_docs/docs/Control/Gain_Schedule","draft":false,"unlisted":false,"editUrl":"https://github.com/WU-AI-Racing/wuair_docs.git/docs/Control/Gain_Schedule.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"PID Control","permalink":"/wuair_docs/docs/Control/PID"},"next":{"title":"Model Predictive Control","permalink":"/wuair_docs/docs/Control/MPC"}}');var n=i(4848),o=i(8453);const s={sidebar_position:5},l="Gain scheduling",r={},c=[{value:"syms matlab, linearization",id:"syms-matlab-linearization",level:2},{value:"Video Lecture",id:"video-lecture",level:3},{value:"Definitions",id:"definitions",level:3},{value:"full state feedback",id:"full-state-feedback",level:2},{value:"Definitions",id:"definitions-1",level:3},{value:"Iterative Eigenvalue Manipulation",id:"iterative-eigenvalue-manipulation",level:2},{value:"MATLAB",id:"matlab",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"gain-scheduling",children:"Gain scheduling"})}),"\n",(0,n.jsx)(t.admonition,{title:"Accessibility",type:"note",children:(0,n.jsxs)(t.p,{children:["If math images are not rendering, a pre-compiled PDF version of this page is available ",(0,n.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(9367).A+"",children:"here"}),"."]})}),"\n",(0,n.jsx)(t.h2,{id:"syms-matlab-linearization",children:"syms matlab, linearization"}),"\n",(0,n.jsx)(t.h3,{id:"video-lecture",children:"Video Lecture"}),"\n",(0,n.jsxs)(t.p,{children:["I link below a short (and dense) example of the Linearization of a\nnonlinear set of dynamics using both MATLAB syms and a manual method:\n",(0,n.jsx)(t.a,{href:"https://www.youtube.com/watch?v=UQpt7qJdd1I",children:"Linerization Example with syms in MATLAB"})]}),"\n",(0,n.jsx)(t.h3,{id:"definitions",children:"Definitions"}),"\n",(0,n.jsxs)(t.p,{children:["We are some system described by the following equation, for state ",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7Dx",alt:"x"}),"\nand input ",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7Du",alt:"u"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7D%5Cdot%7Bx%7D=f(x,u)",alt:"xdot = f(x,u)"})}),"\n",(0,n.jsxs)(t.p,{children:["where our linearization is defined, about a linearization point\n",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7D(x_0,u_0)",alt:"(x0,u0)"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7D%5Cdot%7Bx%7D(x,u)%5Capprox%20f(x_0,u_0)+%5Cleft.%5Cfrac%7B%5Cpartial%20f%7D%7B%5Cpartial%20x%7D%5Cright%5Cvert_%7Bx_0,u_0%7D(x-x_0)+%5Cleft.%5Cfrac%7B%5Cpartial%20f%7D%7B%5Cpartial%20u%7D%5Cright%5Cvert_%7Bx_0,u_0%7D(u-u_0)",alt:"xdot approx f plus jacobians"})}),"\n",(0,n.jsxs)(t.p,{children:["The jacobians are redefined to be ",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7DA(x_0,u_0)",alt:"A(x0,u0)"})," and ",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7DB(x_0,u_0)",alt:"B(x0,u0)"})," in\norder of appearance. We can then group terms and define\n",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7D(%5CDelta%20x,%5CDelta%20u):=(x-x_0,u-u_0)",alt:"Delta x, Delta u"}),", such that:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7D%5CDelta%5Cdot%7Bx%7D=A%5CDelta%20x+B%5CDelta%20u",alt:"Delta xdot = A Delta x + B Delta u"})}),"\n",(0,n.jsxs)(t.p,{children:["Note the linearity of the derivative, such that\n",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7D%5Cfrac%7Bd%5CDelta%20x%7D%7Bdt%7D=%5CDelta%5Cfrac%7Bdx%7D%7Bdt%7D",alt:"d(Delta x)/dt = Delta dx/dt"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"full-state-feedback",children:"full state feedback"}),"\n",(0,n.jsx)(t.h3,{id:"definitions-1",children:"Definitions"}),"\n",(0,n.jsx)(t.p,{children:"I will assume you have seen or understand the prior definitions for the\nlinearization of our nonlinear dynamics. Given them, we define full\nstate feedback as such:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7Du=-K%5ETx%5Cimplies%5CDelta%5Cdot%7Bx%7D=(A-BK%5ET)%5CDelta%20x",alt:"u = -KTx implies Delta xdot = (A-BKT) Delta x"})}),"\n",(0,n.jsxs)(t.p,{children:["It should be noted ",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7Du_0=-K%5ETx_0",alt:"u0 = -KTx0"})," implies ",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7D%5CDelta%20u=-K%5ET%5CDelta%20x",alt:"Delta u = -KT Delta x"}),".\nThe matrix ",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7DA-BK%5ET",alt:"A-BKT"}),"'s eigenvalues decide directly the settling time\nand stability margins for our linear system. Because our system is\nheavily nonlinear and MIMO (Multiple Input, Multiple Output), we cannot\nsimply solve for the eigenvalues and remain computationally efficient.\nInstead, we can use ",(0,n.jsx)(t.code,{children:"place()"})," in MATLAB or python control\npackages to automate these processes.\nThere are conditions to this process, one such one being the linear\nsystem be controllable, a key failure of gain scheduling."]}),"\n",(0,n.jsx)(t.h2,{id:"iterative-eigenvalue-manipulation",children:"Iterative Eigenvalue Manipulation"}),"\n",(0,n.jsxs)(t.p,{children:["Now that we can know the form of the matrix to solve for and have a\nmethod to solve for the gain matrix ",(0,n.jsx)(t.img,{src:"https://latex.codecogs.com/svg.image?%5Ccolor%7Bwhite%7DK",alt:"K"}),", we must build our pipeline."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-text",children:"function getNewControl(f,x)\n    Given dynamics f, current state x,\n    linearize f about x,\n    solve for desired eigenvalues,\n    return controller u=-K^Tx\n"})}),"\n",(0,n.jsx)(t.h1,{id:"general-tools",children:"General Tools"}),"\n",(0,n.jsx)(t.h2,{id:"matlab",children:"MATLAB"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://www.mathworks.com/help/symbolic/syms.html",children:"syms MATLAB help page"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://www.mathworks.com/help/matlab/ref/ode45.html",children:"ode45 MATLAB help page"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://www.youtube.com/watch?v=FXSpHy8LvmY",children:"Pole Placement MATLAB Tutorial (Eigenvalue Manipulation)"})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},9367(e,t,i){i.d(t,{A:()=>a});const a=i.p+"assets/files/notes-09ebe45ef8ba6f3a1cfaf944445e72f1.pdf"},8453(e,t,i){i.d(t,{R:()=>s,x:()=>l});var a=i(6540);const n={},o=a.createContext(n);function s(e){const t=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);